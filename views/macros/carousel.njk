{% macro get(carousel) %}

<style>
    .btn, .btn-flat {
        text-transform: none !important;
    }

    .cpos {
        position: absolute !important;
        top: 75px !important;
        left: 0 !important;
        width: 100%;
        height: 100%;
        background-size: cover !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
    }

    .cpos {
        width: 100vw !important;
        height: calc(100vw / 3);
    }

	.title {
		color: #02dbbe;
		font-size: 30px;
		font-weight: bolder;
	}

    .cslider {
        height: calc(100vw / 3 + 50px);
    }

    @media (max-width: 700px) {
        .cpos {
            width: 100vw !important;
            height: calc(100vw / 2) !important;
        }
        .title {
            font-size: small !important;
			color: #02dbbe;
        }
        .spotlight {
            font-size: small !important;
        }
        .cslider {
            height: calc(100vw / 2 + 50px);
        }
    }

    .image-container {
        transform: rotate(15deg) !important;
    }

    .image {
        position: relative;
        top: 15%;
        background-size: cover !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
    }

    .the-thing {
        opacity: 1;
        transition-property: width;
        transition: all 0.1s ease;
    }

    .the-thing .image {
        z-index: 11 !important;
    }

    .no-thing {
        opacity: 0;
        /* transform: scale(1.5); */
        transition-property: width;
        transition: all 0.1s ease-in-out;
    }
</style>

<script>
    let current = 0
    const n = {{ carousel | length }}

    $(document).ready(function() {
        $('.slide-0').removeClass('no-thing')
        $('.slide-0').addClass('the-thing')
        setInterval(() => {
            $('.slide-' + current).removeClass('the-thing')
            $('.slide-' + current).addClass('no-thing')
            current = (current + 1) % n
            $('.slide-' + current).removeClass('no-thing')
            $('.slide-' + current).addClass('the-thing')
        }, 5000)
    })

</script>

<section class="cslider" style="overflow-x: hidden !important;">
    {% for item in carousel %}
    <div class="no-thing lazy-bg slide-{{loop.index0}} cpos" style="overflow-x: hidden !important;" data-bg="overflow-x: hidden !important; background: linear-gradient(to right, rgba(1, 1, 1, 0.7) 90%, rgba(1, 1, 1, 0.7) 90%, rgba(1, 1, 1, 0.7) 90%), url('{{item.bannerImage}}');">
        <div class="px-lg-5 px-3 d-flex" style="height: 99.9% !important; overflow: hidden;">
            <div class="col-lg-7 col-md-6 col-sm-8 col-8">
                <div class="col-10" style="height: 100%;">
                    <div class="col-12 d-flex flex-column justify-content-end" style="height: 100%;">
                        <p class="spotlight my-2 p-0" style="color: #02dbbe; font-weight: 700;">{{'#' + loop.index + '  SPOTLIGHT'}}</p>
                        <h3 class="mb-lg-3 mg-md-3 m-0 p-0 title">{{item.title.english or item.title.native}}</h3>
                        <p class="d-lg-block d-md-block d-none text-light"
                            style="max-height: 30% !important; overflow: scroll !important;">{{item.description | safe }}
                        </p>
                        <div class="my-3 d-flex">
                            <a href="/details/{{item.id}}">
                            <button class="btn-flat waves-effect waves-light teal accent-4 text-light rounded-3 d-flex">
                                <i style="font-size: medium;" class="bi bi-caret-right-fill"></i>
                                <span>Watch Now</span>
                            </button>
                            </a>
                            <a href="/details/{{item.id}}">
                                <button class="btn-flat mx-1 waves-effect waves-light text-light rounded-3 d-flex" style="background-color: #e0f2f13a;">
                                    <i style="font-size: medium;" class="bi bi-caret-right"></i>
                                    <span>Details</span>
                                </button>
                            </a>
                        </div>
                        <div class="d-lg-block d-md-block d-none my-2"></div>
                        <div class="my-2"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-md-6 col-sm-9 col-9 d-flex justify-content-center"
                style="height: 100% !important; overflow: hidden;">
                <div class="image-container col-8 d-flex justify-content-center"
                    style="background-color: #e0f2f1; margin-top: -25%; height: 150%;">
                    <div class="image lazy-bg col-11"
                        data-bg="margin-top: -10%; height: 100%; background-image: url('{{item.coverImage.extraLarge}}');">
                    </div>
                </div>
            </div>
        </div>
        <div class="progress p-0 m-0 transparent" style="z-index: 2">
            <div class="determinate teal accent-3" style="width: {{loop.index}}0%; height: 1px"></div>
        </div>
    </div>
    {% endfor %}
</section>

{% endmacro %}
